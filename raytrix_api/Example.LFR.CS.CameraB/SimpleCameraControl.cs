/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2016 Raytrix GmbH. All rights reserved.
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// namespace: Example.LFR.CS
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
namespace Example.LFR.CS
{
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// <summary>
	///     A simple camera control.
	/// </summary>
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	public partial class SimpleCameraControl : UserControl
	{
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>
		///     Constructor.
		/// </summary>
		///
		/// <param name="sCameraName">  Name of the camera. </param>
		/// <param name="uCameraIndex"> Zero-based index of the camera. </param>
		/// <param name="fFps">         The FPS. </param>
		/// <param name="fExposure">    The exposure. </param>
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		public SimpleCameraControl(string sCameraName, uint uCameraIndex, float fFps, float fExposure)
		{
			InitializeComponent();

			labelCameraName.Text    = sCameraName;
			m_uCameraIndex          = uCameraIndex;
			numUpDownFPS.Value      = System.Convert.ToDecimal(fFps);
			numUpDownExposure.Value = System.Convert.ToDecimal(fExposure);
		}

		private SimpleCameraControl()
		{
			InitializeComponent();
		}

		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>
		///     Event handler. Called by startButton for click events.
		/// </summary>
		///
		/// <param name="sender"> Source of the event. </param>
		/// <param name="e">      Event information. </param>
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		private void startButton_Click(object sender, EventArgs e)
		{
			StartCamera(m_uCameraIndex);
		}

		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>
		///     Event handler. Called by stopButton for click events.
		/// </summary>
		///
		/// <param name="sender"> Source of the event. </param>
		/// <param name="e">      Event information. </param>
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		private void stopButton_Click(object sender, EventArgs e)
		{
			StopCamera(m_uCameraIndex);
		}

		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>
		///     Event handler. Called by numUpDownFPS for value changed events.
		/// </summary>
		///
		/// <param name="sender"> Source of the event. </param>
		/// <param name="e">      Event information. </param>
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		private void numUpDownFPS_ValueChanged(object sender, EventArgs e)
		{
			ChangeFPS(m_uCameraIndex, System.Convert.ToDouble(numUpDownFPS.Value));
		}

		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		/// <summary>
		///     Event handler. Called by numUpDownExposure for value changed events.
		/// </summary>
		///
		/// <param name="sender"> Source of the event. </param>
		/// <param name="e">      Event information. </param>
		/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
		private void numUpDownExposure_ValueChanged(object sender, EventArgs e)
		{
			ChangeExposure(m_uCameraIndex, System.Convert.ToDouble(numUpDownExposure.Value));
		}

		public event UnsignedEventHandler StartCamera = delegate { };
		public event UnsignedEventHandler StopCamera = delegate { };
		public event DoubleEventHandler ChangeFPS = delegate { };
		public event DoubleEventHandler ChangeExposure = delegate { };

		uint m_uCameraIndex;
	}
}
